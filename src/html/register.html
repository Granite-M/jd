<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>register</title>
    <link rel="stylesheet" href="../style/register.css">
    <script src="../js/register.js" type="module"></script>
</head>
<style>

</style>

<body>
    <header>
        <div class="logo"></div>
        <h3>欢迎注册</h3>
        <p>

            <span>已有账号?</span>
            <a href="login.html">请登录></a>
        </p>
    </header>
    <main>
        <div class="top">
            <div>
                <span>1</span>
                <p>验证手机号</p>
            </div>
            <div class="dian">·····················</div>
            <div>
                <span>2</span>
                <p>填写账号信息</p>
            </div>
            <div class="dian">·····················</div>
            <div>
                <span>3</span>
                <p>注册成功</p>
            </div>
        </div>
        <div class="main">
            <a href="../js/interface/reg.php"></a>
            <form action="../js/interface/reg.php" method="get" autocomplete="off">
                <div>
                    <span>用户名</span>
                    <input type="text" name="username" id="username" placeholder="您的账户名和登录名" value="wangwu">
                </div>

                <div>
                    <span>请输入手机号</span>
                    <input type="tel" name="phone" id="phone" placeholder="建议使用常用手机号" value="13133559988">
                </div>
                <div>
                    <span>手机验证码</span>
                    <input type="text" name="" id="phonetest" placeholder="请输入手机验证码" value="">
                    <span id="get_phone_test">获取验证码</span>
                </div>


                <div>
                    <span>设置密码</span>
                    <input type="text" name="password" id="password" placeholder="至少六位，须有大小写字母数字和特殊符号" value="">
                </div>
                <div>
                    <span>确认密码</span>
                    <input type="text" name="password1" id="password1" placeholder="请再次输入密码" value="aA1@236">
                </div>


                <div>
                    <span>邮箱验证</span>
                    <input type="email" name="email" id="email" placeholder="请输入邮箱" value="13133559988@123.com">
                </div>
                <div>
                    <span>邮箱验证码</span>
                    <input type="text" name="emailtest" id="emailtest" placeholder="请输入邮箱验证码" value="">
                    <span id="get_email_test">获取验证码</span>
                </div>

                <a href=""></a>
                <div>
                    <input type="submit" name="" id="submit" value="注册">
                </div>
                <!-- <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.js"></script>
                <script>
                    $(function () {



                        let username = document.querySelector('#username')
                        let password1 = document.querySelector('#password1')
                        let password = document.querySelector('#password')
                        let email = document.querySelector('#email')
                        let phone = document.querySelector('#phone')
                        phone.reg = /^(?:(?:\+|00)86)?1(?:(?:3[\d])|(?:4[5-79])|(?:5[0-35-9])|(?:6[5-7])|(?:7[0-8])|(?:8[\d])|(?:9[189]))\d{8}$/
                        email.reg = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/
                        password.reg = /^\S*(?=\S{6,})(?=\S*\d)(?=\S*[A-Z])(?=\S*[a-z])(?=\S*[!@#$%^&*? ])\S*$/
                        username.reg = /^[a-zA-Z0-9_-]{4,16}$/
                        function test(ele) {
                            ele.addEventListener('blur', function () {
                                if (ele.parentElement.nextElementSibling.nodeName === 'P') {
                                    ele.parentElement.nextElementSibling.remove()
                                }
                                let val = ele.value
                                //清除空格
                                val = val.replace(/[\s]*/ig, '')
                                let flag = ele.reg.test(val)
                                if (!flag) {
                                    let p = document.createElement('p')
                                    if (val) {
                                        p.innerHTML = '格式不正确'
                                    } else {
                                        p.innerHTML = '请输入正确的内容'

                                    } ele.parentElement.after(p)

                                }

                            })

                        }//------------------------------------------------------------------------------

                        //ajax请求


                        $('#username').on('input', function () {
                            $.get('../js/interface/hasuser.php', {
                                username: $(username).val()
                            }, function (response) {
                                console.log(response);
                                console.log($(username).val());
                                if (username.parentElement.nextElementSibling.nodeName === 'P') {
                                    username.parentElement.nextElementSibling.remove()
                                }
                                if (response.has) {

                                    let p = document.createElement('p')
                                    p.innerHTML = '用户名已存在'
                                    username.parentElement.after(p)
                                }

                            }, 'json');
                        });

                        //------------------------------------------------------------------------------

                        test(username)
                        test(password)
                        test(email)
                        test(phone)
                        password1.onblur = function () {
                            if (password1.parentElement.nextElementSibling.nodeName === 'P') {
                                password1.parentElement.nextElementSibling.remove()
                            }
                            if (!(password1.value === password.value)) {
                                let p = document.createElement('p')
                                p.innerHTML = '两次输入的密码不一致'
                                password1.parentElement.after(p)
                            }
                        }
                    })

                </script> -->
            </form>
        </div>
        <div class=" bottom">
            <a href=""><i></i> 企业用户注册 </a>
            <a href=""><i></i> 海外用户注册 </a>
        </div>

    </main>
    <footer>

        <div>
            <a target="_blank" href="">
                关于我们
            </a>
            |
            <a target="_blank" href="">
                联系我们
            </a>
            |
            <a target="_blank" href="">
                人才招聘
            </a>
            |
            <a target="_blank" href="">
                商家入驻
            </a>
            |
            <a target="_blank" href="">
                广告服务
            </a>
            |
            <a target="_blank" href="">
                手机京东
            </a>
            |
            <a target="_blank" href="">
                友情链接
            </a>
            |
            <a target="_blank" href="">
                销售联盟
            </a>
            |
            <a href="" target="_blank">
                京东社区
            </a>
            |
            <a href="" target="_blank">
                京东公益
            </a>
            |
            <a target="_blank" href="">English Site</a>
        </div>
        <div>
            Copyright&nbsp;©&nbsp;2004-2021&nbsp;&nbsp;京东JD.com&nbsp;版权所有
        </div>

    </footer>

</body>

</html>